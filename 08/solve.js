
const solve = f => (MH = class {constructor() { this.h = []; };push = i => (this.h.push(i), this.bU(this.h.length - 1));pop = () => { const t = this.h[0]; const l = this.h.pop(); if (this.h.length > 0) { this.h[0] = l; this.bD(0); } return t; };bU = i => { while (i > 0) { const p = (i - 1) >> 1; if (this.h[p].d <= this.h[i].d) break;[this.h[p], this.h[i]] = [this.h[i], this.h[p]]; i = p; } };bD = i => { while (true) { const l = 2 * i + 1; const r = 2 * i + 2; let s = i; if (l < this.h.length && this.h[l].d < this.h[s].d) s = l; if (r < this.h.length && this.h[r].d < this.h[s].d) s = r; if (s === i) break;[this.h[i], this.h[s]] = [this.h[s], this.h[i]]; i = s; } };get size() { return this.h.length; }},UF = class {constructor(s) { this.p = Array.from({ length: s }, (_, i) => i); this.r = new Array(s).fill(0); this.c = s; };f = (x) => (this.p[x] !== x ? this.p[x] = this.f(this.p[x]) : undefined, this.p[x]);u = (x, y) => (x = this.f(x)) == (y = this.f(y)) ? 0 : (this.r[x] < this.r[y] ? this.p[x] = y : this.r[x] > this.r[y] ? this.p[y] = x : (this.p[y] = x, this.r[x]++), this.c--, 1);s = (c) => Object.values(this.p.reduce((o, _, i) => (i = this.f(i), o[i] = (o[i] || 0) + 1, o), {})).sort((a, b) => b - a).slice(0, c)},dS = (a, b) => (dx = a[0] - b[0], dy = a[1] - b[1], dz = a[2] - b[2], dx * dx + dy * dy + dz * dz),bph = (p) => { for (var h = new MH, i = 0, j; i < p.length; i++, j = i)for (; ++j < p.length;)h.push({ i, j, d: dS(p[i], p[j]) }); return h },flc = (points) => { const h = bph(points); const uf = new UF(points.length); let lP = null; while (uf.c > 1 && h.size > 0) { const p = h.pop(); if (uf.u(p.i, p.j)) { lP = p; } } return points[lP.i][0] * points[lP.j][0]; },cP = (p, c) => {const h = bph(p); const uf = new UF(p.length); for (let i = 0; i < c && h.size > 0; i++) { const { i: a, j: b } = h.pop(); uf.u(a, b); } return uf.s(3).reduce((a, b) => a * b, 1);},i=require('fs').readFileSync(f, "utf-8"),p=i.split("\n").map((line) => line.split(",").map(Number)), {a:cP(p,1000),b:flc(p)})
console.log(solve("input.txt"))